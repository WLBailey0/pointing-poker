{"ast":null,"code":"// src/PokerTable.js\nimport React,{useState,useEffect}from'react';import socket from'./services/socket';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PokerTable=_ref=>{let{username}=_ref;const[vote,setVote]=useState(null);const[votes,setVotes]=useState({});const[showResults,setShowResults]=useState(false);const[users,setUsers]=useState({});useEffect(()=>{socket.on('votes',votes=>{setVotes(votes);});socket.on('results',data=>{setVotes(data.votes);setShowResults(true);});socket.on('users',users=>{setUsers(users);});socket.on('clear',()=>{setVotes(null);setShowResults(false);});return()=>{socket.off('votes');socket.off('results');socket.off('users');socket.off('clear');};},[]);const handleVote=value=>{setVote(value);socket.emit('vote',{username,vote:value});};const handleShowResults=()=>{socket.emit('show_results');};const handleClearResults=()=>{socket.emit('clear_results');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Planning Poker\"}),/*#__PURE__*/_jsx(\"h3\",{children:username}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(1),children:\"1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(2),children:\"2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(3),children:\"3\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(5),children:\"5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(8),children:\"8\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(13),children:\"13\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleShowResults,children:\"Show Results\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearResults,children:\"Clear Results\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users in the session\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.values(users).map((user,index)=>/*#__PURE__*/_jsx(\"li\",{children:user},index))})]}),showResults&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Results\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vote\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(votes).map(_ref2=>{let[user,vote]=_ref2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:users[user]}),/*#__PURE__*/_jsx(\"td\",{children:vote})]},user);})})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Average: \",Object.values(votes).reduce((a,b)=>a+b,0)/Object.values(votes).length]})]})]});};export default PokerTable;","map":{"version":3,"names":["React","useState","useEffect","socket","jsx","_jsx","jsxs","_jsxs","PokerTable","_ref","username","vote","setVote","votes","setVotes","showResults","setShowResults","users","setUsers","on","data","off","handleVote","value","emit","handleShowResults","handleClearResults","children","onClick","Object","values","map","user","index","entries","_ref2","reduce","a","b","length"],"sources":["/home/linux/team-pointing-poker/client/src/PokerTable.js"],"sourcesContent":["// src/PokerTable.js\nimport React, { useState, useEffect } from 'react';\nimport socket from './services/socket';\n\nconst PokerTable = ({ username }) => {\n  const [vote, setVote] = useState(null);\n  const [votes, setVotes] = useState({});\n  const [showResults, setShowResults] = useState(false);\n  const [users, setUsers] = useState({});\n\n  useEffect(() => {\n    socket.on('votes', (votes) => {\n      setVotes(votes);\n    });\n\n    socket.on('results', (data) => {\n      setVotes(data.votes);\n      setShowResults(true);\n    });\n\n    socket.on('users', (users) => {\n      setUsers(users);\n    });\n\n    socket.on('clear', () => {\n      setVotes(null);\n      setShowResults(false)\n    })\n\n    return () => {\n      socket.off('votes');\n      socket.off('results');\n      socket.off('users');\n      socket.off('clear')\n    };\n  }, []);\n\n  const handleVote = (value) => {\n    setVote(value);\n    socket.emit('vote', { username, vote: value });\n  };\n\n  const handleShowResults = () => {\n    socket.emit('show_results');\n  };\n\n  const handleClearResults = () => {\n    socket.emit('clear_results')\n  }\n\n  return (\n    <div>\n      <h2>Planning Poker</h2>\n      <h3>{username}</h3>\n      <div>\n        <button onClick={() => handleVote(1)}>1</button>\n        <button onClick={() => handleVote(2)}>2</button>\n        <button onClick={() => handleVote(3)}>3</button>\n        <button onClick={() => handleVote(5)}>5</button>\n        <button onClick={() => handleVote(8)}>8</button>\n        <button onClick={() => handleVote(13)}>13</button>\n      </div>\n      <button onClick={handleShowResults}>Show Results</button>\n      <button onClick={handleClearResults}>Clear Results</button>\n      <div>\n        <h3>Users in the session</h3>\n        <ul>\n          {Object.values(users).map((user, index) => (\n            <li key={index}>{user}</li>\n          ))}\n        </ul>\n      </div>\n      {showResults && (\n        <div>\n          <h3>Results</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>Username</th>\n                <th>Vote</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(votes).map(([user, vote]) => (\n                <tr key={user}>\n                  <td>{users[user]}</td>\n                  <td>{vote}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <h4>Average: {Object.values(votes).reduce((a, b) => a + b, 0) / Object.values(votes).length}</h4>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PokerTable;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}